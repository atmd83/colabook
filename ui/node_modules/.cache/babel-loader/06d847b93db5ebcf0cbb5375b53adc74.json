{"ast":null,"code":"import _regeneratorRuntime from\"/Users/atmd/colabook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/atmd/colabook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/atmd/colabook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/atmd/colabook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{Link}from'react-router-dom';import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import axios from\"axios\";import BackButton from'../back';import Pepsi from\"../pepsi\";import Coke from\"../coke\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Booking=function Booking(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),complete=_useState6[0],setComplete=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var booking=localStorage.getItem('pending-booking');if(!booking){return/*#__PURE__*/_jsx(\"p\",{children:\"Something went wrong\"});}var book=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/bookings\"),_objectSpread(_objectSpread({},JSON.parse(booking)),{},{name:name,email:email})).then(function(r){return r.data;}).then(function(){return setComplete(true);});case 3:setLoading(false);case 4:case\"end\":return _context.stop();}}},_callee);}));return function book(){return _ref.apply(this,arguments);};}();var avail=JSON.parse(booking);return/*#__PURE__*/_jsxs(\"main\",{className:'p-3 w-100',children:[/*#__PURE__*/_jsx(BackButton,{}),/*#__PURE__*/_jsxs(\"aside\",{className:'text-center',children:[avail.brand==='Pepsi'&&/*#__PURE__*/_jsx(Pepsi,{height:50,width:'50'}),avail.brand!=='Pepsi'&&/*#__PURE__*/_jsx(Coke,{height:50,width:'50'}),/*#__PURE__*/_jsx(\"div\",{className:'mt-3 mb-3',style:{lineHeight:'1rem',flex:1},children:/*#__PURE__*/_jsxs(\"p\",{className:'p-0 m-0',children:[avail.room,\" - \",avail.time]})})]}),!complete&&/*#__PURE__*/_jsxs(Form,{style:{margin:'0 auto',maxWidth:'500px'},children:[/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return setName(e.target.value);},type:\"text\",placeholder:\"Your name\"})}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\",placeholder:\"Your email\"})}),/*#__PURE__*/_jsx(Button,{disabled:loading||!name||!email,variant:\"primary\",type:\"button\",onClick:book,children:loading?'Loading…':'Book'})]}),!!complete&&/*#__PURE__*/_jsxs(\"div\",{className:'text-center p-3',style:{margin:'0 auto',maxWidth:'500px',background:'#fff',border:'1px solid rgba(0,0,0,.2)',borderRadius:'.3rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Complete\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Room \",avail.room,\" is now booked at \",avail.time]}),/*#__PURE__*/_jsx(\"p\",{children:\"You can cancel your booking at any time from the home screen\"}),/*#__PURE__*/_jsx(Link,{to:'/',children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"button\",children:\"Complete\"})})]})]});};export default Booking;","map":{"version":3,"sources":["/Users/atmd/colabook/ui/src/components/booking/index.js"],"names":["useState","Link","Button","Form","axios","BackButton","Pepsi","Coke","Booking","loading","setLoading","name","setName","complete","setComplete","email","setEmail","booking","localStorage","getItem","book","post","process","env","REACT_APP_API_URL","JSON","parse","then","r","data","avail","brand","lineHeight","flex","room","time","margin","maxWidth","e","target","value","background","border","borderRadius"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport axios from \"axios\";\n\nimport BackButton from '../back';\nimport Pepsi from \"../pepsi\";\nimport Coke from \"../coke\";\n\nconst Booking = () => {\n    const [loading, setLoading] = useState(false);\n    const [name, setName] = useState(false);\n    const [complete, setComplete] = useState(false);\n    const [email, setEmail] = useState(false);\n    const booking = localStorage.getItem('pending-booking');\n\n    if(!booking) {\n        return (\n            <p>Something went wrong</p>\n        );\n    }\n    const book = async () => {\n        setLoading(true);\n\n        await axios.post(`${process.env.REACT_APP_API_URL}/bookings`, {\n            ...JSON.parse(booking),\n            name,\n            email\n        })\n        .then(r => r.data)\n        .then(() => setComplete(true));\n\n        setLoading(false);\n    }\n\n    const avail = JSON.parse(booking);\n\n    return (\n        <main className={'p-3 w-100'}>\n            <BackButton />\n            <aside className={'text-center'}>\n                {(avail.brand === 'Pepsi') && (<Pepsi height={50} width={'50'} />)}\n                {(avail.brand !== 'Pepsi') && (<Coke height={50} width={'50'} />)}\n\n                <div className={'mt-3 mb-3'} style={{lineHeight: '1rem', flex: 1}}>\n                    <p className={'p-0 m-0'}>{avail.room} - {avail.time}</p>\n                </div>\n            </aside>\n\n            {!(complete) && (\n                <Form style={{margin: '0 auto', maxWidth: '500px'}}>\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n                        <Form.Control onChange={(e) => setName(e.target.value)} type=\"text\" placeholder=\"Your name\" />\n                    </Form.Group>\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n                        <Form.Control onChange={(e) => setEmail(e.target.value)} type=\"email\" placeholder=\"Your email\" />\n                    </Form.Group>\n                    <Button disabled={loading || !name || !email} variant=\"primary\" type=\"button\" onClick={book}>\n                        {loading ? 'Loading…' : 'Book'}\n                    </Button>\n                </Form>\n            )}\n\n            {!!(complete) && (\n                <div className={'text-center p-3'} style={{margin: '0 auto', maxWidth: '500px', background: '#fff', border: '1px solid rgba(0,0,0,.2)', borderRadius: '.3rem'}}>\n                    <strong>Complete</strong>\n                    <p>Room {avail.room} is now booked at {avail.time}</p>\n                    <p>You can cancel your booking at any time from the home screen</p>\n\n                    <Link to={'/'}>\n                        <Button variant=\"primary\" type=\"button\">\n                            Complete\n                        </Button>\n                    </Link>\n                </div>\n            )}\n        </main>\n    );\n\n}\n\nexport default Booking;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/atmd/colabook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/atmd/colabook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/atmd/colabook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import axios from\"axios\";import BackButton from'../back';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cancel=function Cancel(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),looked=_useState4[0],setLooked=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),bookings=_useState6[0],setBookings=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var cancelBooking=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(booking){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/bookings/\").concat(booking.id)).then(function(r){return r.data;});case 2:findBookings();case 3:case\"end\":return _context.stop();}}},_callee);}));return function cancelBooking(_x){return _ref.apply(this,arguments);};}();var findBookings=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/bookings/\").concat(email)).then(function(r){return r.data;}).then(setBookings);case 3:setLooked(true);setLoading(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function findBookings(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:'p-3',children:[/*#__PURE__*/_jsx(BackButton,{}),/*#__PURE__*/_jsxs(Form,{className:'mb-5',style:{margin:'0 auto',maxWidth:'500px'},children:[/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\",placeholder:\"Your email\"})}),/*#__PURE__*/_jsx(Button,{disabled:loading||!email,variant:\"primary\",type:\"button\",onClick:findBookings,children:loading?'Loading…':'Find bookings'})]}),bookings.map(function(booking){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"aside\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"img\",{width:'50',src:\"/images/\".concat(booking.brand,\".png\"),alt:''}),/*#__PURE__*/_jsxs(\"div\",{className:'pl-3 pt-2',style:{lineHeight:'1rem',flex:1},children:[/*#__PURE__*/_jsxs(\"p\",{className:'p-0 m-0',children:[booking.room,\" - booked\"]}),/*#__PURE__*/_jsx(\"p\",{className:'p-0 m-0',children:booking.time})]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return cancelBooking(booking);},children:\"Cancel booking\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]},booking.room);}),!!(bookings.length===0)&&looked&&/*#__PURE__*/_jsx(\"p\",{className:'pt-3 pb-3',children:\"Sorry, we can't find any bookings with that email address.\"})]});};export default Cancel;","map":{"version":3,"sources":["/Users/atmd/colabook/ui/src/components/cancel/index.js"],"names":["useState","Form","Button","axios","BackButton","Cancel","email","setEmail","looked","setLooked","bookings","setBookings","loading","setLoading","cancelBooking","booking","delete","process","env","REACT_APP_API_URL","id","then","r","data","findBookings","get","margin","maxWidth","e","target","value","map","display","justifyContent","brand","lineHeight","flex","room","time","length"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport axios from \"axios\";\n\nimport BackButton from '../back';\n\nconst Cancel = () => {\n    const [email, setEmail] = useState('');\n    const [looked, setLooked] = useState(false);\n    const [bookings, setBookings] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const cancelBooking = async (booking) => {\n        await axios.delete(`${process.env.REACT_APP_API_URL}/bookings/${booking.id}`)\n            .then(r => r.data);\n        findBookings();\n    }\n\n    const findBookings = async () => {\n        setLoading(true);\n        await axios.get(`${process.env.REACT_APP_API_URL}/bookings/${email}`)\n            .then(r => r.data)\n            .then(setBookings);\n        setLooked(true);\n        setLoading(false);\n    }\n\n    return (\n        <div className={'p-3'}>\n            <BackButton />\n            <Form className={'mb-5'} style={{margin: '0 auto', maxWidth: '500px'}}>\n                <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n                    <Form.Control onChange={(e) => setEmail(e.target.value)} type=\"email\" placeholder=\"Your email\" />\n                </Form.Group>\n                <Button disabled={loading || !email} variant=\"primary\" type=\"button\" onClick={findBookings}>\n                    {loading ? 'Loading…' : 'Find bookings'}\n                </Button>\n            </Form>\n\n            {bookings.map(booking => {\n                return (\n                    <div key={booking.room}>\n                    <aside style={{display: 'flex', justifyContent: 'space-between'}}>\n                        <img width={'50'} src={`/images/${booking.brand}.png`} alt={''} />\n                        <div className={'pl-3 pt-2'} style={{lineHeight: '1rem', flex: 1}}>\n                            <p className={'p-0 m-0'}>{booking.room} - booked</p>\n                            <p className={'p-0 m-0'}>{booking.time}</p>\n                        </div>\n                        <Button onClick={() => cancelBooking(booking)}>Cancel booking</Button>\n                    </aside>\n                    <hr />\n                    </div>\n                );\n             })}\n\n            {!!(bookings.length === 0) && looked && (\n                <p className={'pt-3 pb-3'}>Sorry, we can't find any bookings with that email address.</p>\n            )}\n\n        </div>\n    );\n}\n\nexport default Cancel;\n"]},"metadata":{},"sourceType":"module"}
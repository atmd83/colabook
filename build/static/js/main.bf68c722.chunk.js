(this["webpackJsonpcolabook-ui"]=this["webpackJsonpcolabook-ui"]||[]).push([[0],{90:function(e,t,n){"use strict";n.r(t);var a,c,r,s,o,i=n(0),l=n.n(i),b=n(25),j=n.n(b),u=n(15),d=(n(64),n(22)),h=n(20),p=n(7),m=n(9),O=n(19),x=n.n(O),f=n(26),g=n(21),k=n(59),v=n(1),w=function(e){var t=e.onClose,n=e.error;return n?Object(v.jsx)(y,{variant:"danger",onClose:t,dismissible:!0,children:Object(v.jsx)("p",{children:n})}):null},y=Object(u.b)(k.a)(a||(a=Object(d.a)(["\n    position: absolute;\n    bottom: 0;\n    left: 50%;\n    transform: translate(-50%);\n    width: 90%;\n    padding-bottom: 0;\n"]))),C=function(){return Object(v.jsx)("img",{width:"80",src:"/images/logo.png",alt:""})},S=n(32),N=function(e){var t=e.width,n=e.height;return Object(v.jsx)("img",{widt:t,height:n,src:"https://colabook.herokuapp.com/images/Coca-Cola.png",alt:""})},P=function(){return Object(v.jsx)("img",{width:"80",src:"https://colabook.herokuapp.com/images/Pepsi.png",alt:""})},B=function(e){var t=e.availability,n=e.setShowResults;return Object(v.jsxs)(S.a.Dialog,{centered:!0,children:[Object(v.jsx)(S.a.Header,{onHide:function(){return n(!1)},closeButton:!0,children:Object(v.jsx)(S.a.Title,{as:"p",children:"Results"})}),Object(v.jsx)(R,{children:t.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("aside",{style:{display:"flex",justifyContent:"space-between"},children:["Pepsi"===e.brand&&Object(v.jsx)(P,{height:50,width:"50"}),"Pepsi"!==e.brand&&Object(v.jsx)(N,{height:50,width:"50"}),Object(v.jsxs)("div",{className:"pl-3 pt-2",style:{lineHeight:"1rem",flex:1},children:[Object(v.jsxs)("p",{className:"p-0 m-0",children:[e.room," - available"]}),Object(v.jsx)("p",{className:"p-0 m-0",children:e.time})]}),Object(v.jsx)(h.b,{to:"/booking",onClick:function(){localStorage.setItem("pending-booking",JSON.stringify(e))},children:Object(v.jsx)(g.a,{children:"Book"})})]}),Object(v.jsx)("hr",{})]},"".concat(e.room,"-").concat(e.time))}))})]})},R=Object(u.b)(S.a.Body)(c||(c=Object(d.a)(["\n    max-height: 500px;\n    overflow: scroll;\n"]))),L=n(13),E=function(e){var t=e.labelKey,n=e.label,a=e.optionLabel,c=e.options,r=e.onChange,s=e.disabled,o=void 0!==s&&s;return Object(v.jsxs)(L.a.Control,{disabled:o,onChange:r,className:"mb-3 mt-3",as:"select","aria-label":"Default select example",children:[Object(v.jsx)("option",{children:n}),c.map((function(e){return Object(v.jsx)("option",{value:e[t],children:e[a]},e[t])}))]})},F=n(23),I=n.n(F),H=function(e){var t=e.brand,n=e.setBrand,a=e.times,c=e.showResults,r=e.setShowResults,s=e.setLoading,o=e.time,l=e.setTime,b=e.loading,j=e.error,u=e.setError,d=Object(i.useState)([]),h=Object(m.a)(d,2),p=h[0],O=h[1],k=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!0),t&&o||"Coke or Pepsi"===t){e.next=6;break}u("Please select a brand and time."),s(!1),e.next=11;break;case 6:return u(""),e.next=9,I.a.get("".concat("https://colabook.herokuapp.com","/availability/").concat(t,"/").concat(o)).then((function(e){return e.data})).then(O);case 9:s(!1),r(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(J,{children:[Object(v.jsx)(C,{}),Object(v.jsx)(E,{label:"Coke or Pepsi",labelKey:"value",optionLabel:"label",options:[{label:"Coke",value:"coca-cola"},{label:"Pepsi",value:"pepsi"}],onChange:function(e){n(e.target.value)}}),Object(v.jsx)(E,{label:"Time",labelKey:"time",optionLabel:"time",options:a,onChange:function(e){l(e.target.value)},disabled:""===t||"Coke or Pepsi"===t}),Object(v.jsx)(g.a,{disabled:b||""===t||"Coke or Pepsi"===t||"Time"===o||""===o,onClick:k,children:b?"Loading\u2026":"Find a room"}),Object(v.jsx)(T,{to:"/cancel",children:"cancel a booking"})]}),c&&p&&Object(v.jsx)(B,{setShowResults:r,availability:p}),Object(v.jsx)(w,{error:j,onClose:function(){return u(!1)}})]})},J=u.b.section(r||(r=Object(d.a)(["\n    display: flex;      \n    flex-direction: column;\n    text-align: center;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    align-items: center;\n"]))),T=Object(u.b)(h.b)(s||(s=Object(d.a)(["\n    font-size: 0.8rem;\n    margin-top: 1rem;\n    text-decoration: underline;\n    color: ","\n"])),(function(e){return e.theme.white})),A=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)([]),r=Object(m.a)(c,2),s=r[0],o=r[1],l=Object(i.useState)(!1),b=Object(m.a)(l,2),j=b[0],u=b[1],d=Object(i.useState)(""),h=Object(m.a)(d,2),p=h[0],O=h[1],x=Object(i.useState)(!1),f=Object(m.a)(x,2),g=f[0],k=f[1],w=Object(i.useState)(""),y=Object(m.a)(w,2),C=y[0],S=y[1];return Object(i.useEffect)((function(){n&&"Coke or Pepsi"!==n&&I.a.get("".concat("https://colabook.herokuapp.com","/availability/").concat(n)).then((function(e){return e.data})).then(o).catch((function(e){return S("Sorry, something went wrong. Please try again")}))}),[n]),Object(v.jsx)("main",{className:"w-100",children:Object(v.jsx)(H,{brand:n,setBrand:a,times:s,showResults:j,setShowResults:u,setLoading:k,time:p,setTime:O,loading:g,error:C,setError:S})})},K=n(46),Y=function(){return Object(v.jsx)(h.b,{to:"/",children:Object(v.jsx)("p",{className:"mb-3 p-0 text-white",children:"\u140a BACK"})})},G=function(){var e=Object(i.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),r=Object(m.a)(c,2),s=r[0],o=r[1],l=Object(i.useState)(!1),b=Object(m.a)(l,2),j=b[0],u=b[1],d=Object(i.useState)(!1),p=Object(m.a)(d,2),O=p[0],k=p[1],w=localStorage.getItem("pending-booking");if(!w)return Object(v.jsx)("p",{children:"Something went wrong"});var y=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,I.a.post("".concat("https://colabook.herokuapp.com","/bookings"),Object(K.a)(Object(K.a)({},JSON.parse(w)),{},{name:s,email:O})).then((function(e){return e.data})).then((function(){return u(!0)}));case 3:a(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=JSON.parse(w);return Object(v.jsxs)("main",{className:"p-3 w-100",children:[Object(v.jsx)(Y,{}),Object(v.jsxs)("aside",{className:"text-center",children:["Pepsi"===C.brand&&Object(v.jsx)(P,{height:50,width:"50"}),"Pepsi"!==C.brand&&Object(v.jsx)(N,{height:50,width:"50"}),Object(v.jsx)("div",{className:"mt-3 mb-3",style:{lineHeight:"1rem",flex:1},children:Object(v.jsxs)("p",{className:"p-0 m-0",children:[C.room," - ",C.time]})})]}),!j&&Object(v.jsxs)(L.a,{style:{margin:"0 auto",maxWidth:"500px"},children:[Object(v.jsx)(L.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(v.jsx)(L.a.Control,{onChange:function(e){return o(e.target.value)},type:"text",placeholder:"Your name"})}),Object(v.jsx)(L.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(v.jsx)(L.a.Control,{onChange:function(e){return k(e.target.value)},type:"email",placeholder:"Your email"})}),Object(v.jsx)(g.a,{disabled:n||!s||!O,variant:"primary",type:"button",onClick:y,children:n?"Loading\u2026":"Book"})]}),!!j&&Object(v.jsxs)("div",{className:"text-center p-3",style:{margin:"0 auto",maxWidth:"500px",background:"#fff",border:"1px solid rgba(0,0,0,.2)",borderRadius:".3rem"},children:[Object(v.jsx)("strong",{children:"Complete"}),Object(v.jsxs)("p",{children:["Room ",C.room," is now booked at ",C.time]}),Object(v.jsx)("p",{children:"You can cancel your booking at any time from the home screen"}),Object(v.jsx)(h.b,{to:"/",children:Object(v.jsx)(g.a,{variant:"primary",type:"button",children:"Complete"})})]})]})},W=function(){return Object(v.jsx)("main",{className:"p-3 w-100",children:Object(v.jsx)(G,{})})},D=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),r=Object(m.a)(c,2),s=r[0],o=r[1],l=Object(i.useState)([]),b=Object(m.a)(l,2),j=b[0],u=b[1],d=Object(i.useState)(!1),h=Object(m.a)(d,2),p=h[0],O=h[1],k=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.delete("".concat("https://colabook.herokuapp.com","/bookings/").concat(t.id)).then((function(e){return e.data}));case 2:w();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,I.a.get("".concat("https://colabook.herokuapp.com","/bookings/").concat(n)).then((function(e){return e.data})).then(u);case 3:o(!0),O(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"p-3",children:[Object(v.jsx)(Y,{}),Object(v.jsxs)(L.a,{className:"mb-5",style:{margin:"0 auto",maxWidth:"500px"},children:[Object(v.jsx)(L.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(v.jsx)(L.a.Control,{onChange:function(e){return a(e.target.value)},type:"email",placeholder:"Your email"})}),Object(v.jsx)(g.a,{disabled:p||!n,variant:"primary",type:"button",onClick:w,children:p?"Loading\u2026":"Find bookings"})]}),j.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("aside",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)("img",{width:"50",src:"/images/".concat(e.brand,".png"),alt:""}),Object(v.jsxs)("div",{className:"pl-3 pt-2",style:{lineHeight:"1rem",flex:1},children:[Object(v.jsxs)("p",{className:"p-0 m-0",children:[e.room," - booked"]}),Object(v.jsx)("p",{className:"p-0 m-0",children:e.time})]}),Object(v.jsx)(g.a,{onClick:function(){return k(e)},children:"Cancel booking"})]}),Object(v.jsx)("hr",{})]},e.room)})),!(0!==j.length)&&s&&Object(v.jsx)("p",{className:"pt-3 pb-3",children:"Sorry, we can't find any bookings with that email address."})]})},z=function(){return Object(v.jsx)("main",{className:"w-100",children:Object(v.jsx)(D,{})})},M=function(){return Object(v.jsx)(h.a,{children:Object(v.jsx)(q,{children:Object(v.jsxs)(p.c,{children:[Object(v.jsx)(p.a,{exact:!0,path:"/",children:Object(v.jsx)(A,{})}),Object(v.jsx)(p.a,{exact:!0,path:"/booking",children:Object(v.jsx)(W,{})}),Object(v.jsx)(p.a,{exact:!0,path:"/cancel",children:Object(v.jsx)(z,{})})]})})})},q=u.b.div(o||(o=Object(d.a)(["\n    height: 100vh;\n    width: 100vw;\n    overflow: hidden;\n    display: flex;\n    background: ","\n"])),(function(e){return e.theme.gray}));j.a.render(Object(v.jsx)(l.a.StrictMode,{children:Object(v.jsx)(u.a,{theme:{gray:"#8A8A8A",white:"#F7F7F7"},children:Object(v.jsx)(M,{})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.bf68c722.chunk.js.map